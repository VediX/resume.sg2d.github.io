/*!
 * SGModelView 1.0.3 by @ Kalashnikov Ilya
 * https://model.sg2d.ru
 * License MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SGModelView",[],t):"object"==typeof exports?exports.SGModelView=t():e.SGModelView=t()}(this,(function(){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(s,i,function(t){return e[t]}.bind(null,i));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return s}));class s{defaults(){return s.clone(this.constructor.defaultProperties)}constructor(e={},t,r){if(this.constructor.singleInstance){if(this.constructor._instance)throw"Error! this.constructor._instance not is empty!";this.constructor._instance=this}let i=this.defaults();if(this.constructor.localStorageKey){let t=void 0,r=localStorage.getItem(this.constructor.localStorageKey+(this.constructor.singleInstance?"":"_"+e.id));r&&(t=JSON.parse(r)),t&&s.initObjectByObject(i,t)}for(var o in"object"!=typeof e&&(e={}),e){var n=e[o];switch(this.constructor.typeProperties[o]){case s.TYPE_ANY:case s.TYPE_ARRAY:break;case s.TYPE_NUMBER:e[o]=void 0===n?void 0:+n;break;case s.TYPE_NUMBER_OR_XY:"object"==typeof n?(n.x=void 0===n.x?void 0:+n.x,n.y=void 0===n.y?void 0:+n.y):e[o]=void 0===n?void 0:+n;break;case s.TYPE_ARRAY_NUMBERS:for(var a=0;a<n.length;a++)n[a]=+n[a];break;case s.TYPE_OBJECT_NUMBERS:if(Array.isArray(n)){if(!(l=i[o]))throw'No default value was set for an object named "'+o+'" ('+this.constructor.name+")! An object structure is required to fill in the data!";var c=0;for(var a in l)l[a]=+n[c],c++;e[o]=l}else{if("object"!=typeof n)throw'Error! Property "'+o+'" ('+this.constructor.name+") must be an object or an array!";for(var a in n)n[a]=+n[a]}break;case s.TYPE_STRING:e[o]=""+n;break;case s.TYPE_BOOLEAN:e[o]=s.toBoolean(n);break;case s.TYPE_OBJECT:if(Array.isArray(n)){var l;if(!(l=i[o]))throw'No default value was set for an object named "'+o+'" ('+this.constructor.name+")! An object structure is required to fill in the data!";c=0;for(var a in l)l[a]=n[c],c++;e[o]=l}else if("object"!=typeof n)throw'Error! Property "'+o+'" ('+this.constructor.name+") must be an object or an array!";break;default:throw'Error! Unknown type specified for property "'+o+'" ('+this.constructor.name+")!"}}if(this.properties=s.defaults({},i,e),this.properties.id||(this.properties.id=s.uid()),t?Object.assign(this,t):t=s.OBJECT_EMPTY,this.destroyed=!1,this.onChangeCallbacks={},!this.constructor.hasOwnProperty("_ownSettersInitialized"))for(var o in this.constructor._ownSettersInitialized=!0,this.constructor.ownSetters)!0===this.constructor.ownSetters[o]&&(this.constructor.ownSetters[o]=this["set"+s.upperFirstLetter(o)]);this.changed=!1,this.initialize.call(this,e,t,r)}initialize(){}set(e,t,r,i=0){if("object"!=typeof r&&void 0!==r)throw'Error 7610932! "options" type is not a object or undefined! Property: '+e+", constructor: "+this.constructor.name;if("number"!=typeof i)throw'Error 7892354! "flags" type is not a number!';if(r=r||s.OBJECT_EMPTY,!(i&s.FLAG_IGNORE_OWN_SETTER)&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r,i);var o=this.constructor.typeProperties[e];if(o)switch(o){case s.TYPE_ANY:break;case s.TYPE_NUMBER:void 0!==t&&(t=r.precision?s.roundTo(t,r.precision):+t);break;case s.TYPE_NUMBER_OR_XY:return this._setNumberOrXY.apply(this,arguments);case s.TYPE_ARRAY:case s.TYPE_ARRAY_NUMBERS:return this._setArray.apply(this,arguments);case s.TYPE_OBJECT:case s.TYPE_OBJECT_NUMBERS:return this._setObject.apply(this,arguments);case s.TYPE_STRING:t=""+t;break;case s.TYPE_BOOLEAN:t=s.toBoolean(t)}var n=this.properties[e];if(n===t){if(!(i&s.FLAG_FORCE_CALLBACKS))return!1}else this.properties[e]=t,this.changed=!0;if(!(i&s.FLAG_NO_CALLBACKS)){s._prevValue=void 0!==r.previous_value?r.previous_value:i&s.FLAG_PREV_VALUE_CLONE?s.clone(n):n;var a=this.onChangeCallbacks[e];if(a){i&s.FLAG_OFF_MAY_BE&&(a=s.clone(a));var c=void 0;for(var l in a){var _=a[l];void 0!==(c=_.d?_.f.call(_.c?_.c:this,_.d,t,s._prevValue,e):_.f.call(_.c?_.c:this,t,s._prevValue,e))&&(n=c)}}this.onAllCallback&&this.onAllCallback()}return!0}_setArray(e,t,r,i=0){if(r=r||s.OBJECT_EMPTY,!(i&s.FLAG_IGNORE_OWN_SETTER)&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r,i);var o=this.constructor.typeProperties[e],n=this.properties[e];if(s._prevValue=r.previous_value||void 0,s._bChanged=!1,Array.isArray(t))for(var a=0;a<t.length;a++){var c=t[a];o===s.TYPE_ARRAY_NUMBERS&&(c=r.precision?s.roundTo(c,r.precision):+c),n[a]!==c&&(s._bChanged=!0,i&s.FLAG_PREV_VALUE_CLONE&&!s._prevValue&&(s._prevValue=s.clone(n)),n[a]=c)}else{if(t)throw"aValues should be must Array or empty! ("+this.constructor.name+")";for(c=o===s.TYPE_OBJECT_NUMBERS?0:void 0,a=0;a<n.length;a++)n[a]!==c&&(s._bChanged=!0,i&s.FLAG_PREV_VALUE_CLONE&&!s._prevValue&&(s._prevValue=s.clone(n)),n[a]=c)}return s._bChanged&&(this.changed=!0),!!(s._bChanged||i&s.FLAG_FORCE_CALLBACKS)&&(this._runCallbacks(e,n,i),!0)}_setObject(e,t,r,i=0){if(r=r||s.OBJECT_EMPTY,!(i&s.FLAG_IGNORE_OWN_SETTER)&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r,i);var o=this.constructor.typeProperties[e],n=this.properties[e];if(s._prevValue=r.previous_value||void 0,s._bChanged=!1,Array.isArray(t))for(var a in s._index=0,n){var c=t[s._index];o===s.TYPE_OBJECT_NUMBERS&&(c=r.precision?s.roundTo(c,r.precision):+c),n[a]!==c&&(s._bChanged=!0,i&s.FLAG_PREV_VALUE_CLONE&&!s._prevValue&&(s._prevValue=s.clone(n)),n[a]=c),s._index++}else if(t)for(var a in t){c=t[a];o===s.TYPE_OBJECT_NUMBERS&&(c=r.precision?s.roundTo(c,r.precision):+c),n[a]!==c&&(s._bChanged=!0,i&s.FLAG_PREV_VALUE_CLONE&&!s._prevValue&&(s._prevValue=s.clone(n)),n[a]=c)}else{c=o===s.TYPE_OBJECT_NUMBERS?0:void 0;for(var a in n)n[a]!==c&&(s._bChanged=!0,i&s.FLAG_PREV_VALUE_CLONE&&!s._prevValue&&(s._prevValue=s.clone(n)),n[a]=c)}return s._bChanged&&(this.changed=!0),!!(s._bChanged||i&s.FLAG_FORCE_CALLBACKS)&&(this._runCallbacks(e,n,i),!0)}_setNumberOrXY(e,t,r,i=0){if(r=r||s.OBJECT_EMPTY,!(i&s.FLAG_IGNORE_OWN_SETTER)&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r,i);let o=this.properties[e];return s._prevValue=r.previous_value||void 0,s._bChanged=!1,void 0!==t?"object"==typeof t?(t.x=r.precision?s.roundTo(t.x,r.precision):+t.x,t.y=r.precision?s.roundTo(t.y,r.precision):+t.y,"object"==typeof o?o.x===t.x&&o.y===t.y||(s._bChanged=!0,i&s.FLAG_PREV_VALUE_CLONE&&!s._prevValue&&(s._prevValue=s.clone(o)),o.x=t.x,o.y=t.y):o===t.x&&o===t.y||(s._bChanged=!0,s._prevValue=o,this.properties[e]=t)):(t=r.precision?s.roundTo(t,r.precision):+t,"object"==typeof o?o.x===t&&o.y===t||(s._bChanged=!0,i&s.FLAG_PREV_VALUE_CLONE&&!s._prevValue&&(s._prevValue=s.clone(o)),this.properties[e]=t):o!==t&&(s._bChanged=!0,s._prevValue=o,this.properties[e]=t)):o!==t&&(s._bChanged=!0,i&s.FLAG_PREV_VALUE_CLONE&&!s._prevValue&&(s._prevValue=s.clone(o)),this.properties[e]=void 0),!!s._bChanged&&(this.changed=!0,(s._bChanged||i&s.FLAG_FORCE_CALLBACKS)&&this._runCallbacks(e,t,i),!0)}_runCallbacks(e,t,r=0){if(!(r&s.FLAG_NO_CALLBACKS)){var i=this.onChangeCallbacks[e];if(i){r&s.FLAG_OFF_MAY_BE&&(i=s.clone(i));var o=void 0;for(var n in i){var a=i[n];void 0!==(o=a.d?a.f.call(a.c?a.c:this,a.d,t,s._prevValue,e):a.f.call(a.c?a.c:this,t,s._prevValue,e))&&(t=o)}}}}get(e){return this.properties[e]}on(e,t,r,s,i=0){if(Array.isArray(e))for(var o=0;o<e.length;o++)this._on.call(this,e[o],t,Array.isArray(r)?r[o]:r,Array.isArray(s)?s[o]:s,i);else this._on.apply(this,arguments)}_on(e,t,r,i,o=0){var n=this.onChangeCallbacks[e];n||(n=this.onChangeCallbacks[e]=[]),n.push({f:t,c:r,d:i}),o===s.FLAG_IMMEDIATELY&&(i?t.call(r||this,i,this.properties[e],this.properties[e],e):t.call(r||this,this.properties[e],this.properties[e],e))}has(e){return this.properties.hasOwnProperty(e)}setOnAllCallback(e,t=0){this.onAllCallback=e,t===s.FLAG_IMMEDIATELY&&this.onAllCallback()}off(e,t){if(e)if(Array.isArray(e))for(var r=0;r<e.length;r++)this._off.call(this,e[r],t);else this._on.apply(this,arguments);else for(var s in this.onChangeCallbacks)this.onChangeCallbacks[s].length=0}_off(e,t){var r=this.onChangeCallbacks[e];if(r)if(t)for(var s=0;s<r.length;s++)r[s].f===t&&(r.splice(s,1),s--);else r.length=0}trigger(e,t=0){var r=this.onChangeCallbacks[e];if(r)for(var i in t&s.FLAG_OFF_MAY_BE&&(r=s.clone(r)),r){var o=r[i];o.d?o.f.call(o.c?o.c:this,o.d,this.properties[e],this.properties[e],e):o.f.call(o.c?o.c:this,this.properties[e],this.properties[e],e)}}save(){if(!this.constructor.localStorageKey)throw"Error 37722990!";let e;this.constructor.singleInstance&&(e=this.properties.id,delete this.properties.id);let t={};if(this.constructor.localStorageProperties)for(var r=0;r<this.constructor.localStorageProperties.length;r++){let e=this.constructor.localStorageProperties[r];t[e]=this.properties[e]}else for(var s in this.properties)"_"!==s[0]&&(t[s]=this.properties[s]);localStorage.setItem(this.constructor.localStorageKey+(this.constructor.singleInstance?"":"_"+e),JSON.stringify(t)),this.constructor.singleInstance&&(this.properties.id=e)}destroy(){this.destroyed=!0,this.constructor._instance=null,this.off()}}s.typeProperties={},s.defaultsProperties={},s.TYPE_ANY=void 0,s.TYPE_NUMBER=1,s.TYPE_STRING=2,s.TYPE_BOOLEAN=3,s.TYPE_OBJECT=4,s.TYPE_ARRAY=5,s.TYPE_ARRAY_NUMBERS=6,s.TYPE_OBJECT_NUMBERS=7,s.TYPE_NUMBER_OR_XY=8,s.FLAG_IMMEDIATELY=!0,s.OBJECT_EMPTY=Object.preventExtensions({}),s.FLAG_OFF_MAY_BE=1,s.FLAG_PREV_VALUE_CLONE=2,s.FLAG_NO_CALLBACKS=4,s.FLAG_FORCE_CALLBACKS=8,s.FLAG_IGNORE_OWN_SETTER=16,s.OPTIONS_PRECISION_2=Object.preventExtensions({precision:2}),s.OPTIONS_PRECISION_3=Object.preventExtensions({precision:3}),s.OPTIONS_PRECISION_4=Object.preventExtensions({precision:4}),s.OPTIONS_PRECISION_5=Object.preventExtensions({precision:5}),s.ownSetters={},s._uid=0,s.uid=function(){return++s._uid},s.defaults=function(e,...t){for(var r=t.length;r--;){var i=t[r];for(var o in i)void 0===e[o]&&(e[o]="object"==typeof i[o]?s.clone(i[o]):i[o])}return e},s.clone=function(e){let t;if(Array.isArray(e)){t=[];for(var r=0;r<e.length;r++)t[r]="object"==typeof e[r]?s.clone(e[r]):e[r]}else if("object"==typeof e)for(var i in t={},e)t[i]="object"==typeof e[i]?s.clone(e[i]):e[i];else t=e;return t},s.initObjectByObject=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t.hasOwnProperty(r)&&("object"==typeof e[r]?this.initObjectByObject(e[r],t[r]):e[r]=t[r]);else if("object"==typeof e)for(var s in e)t.hasOwnProperty(s)&&("object"==typeof e[s]?this.initObjectByObject(e[s],t[s]):e[s]=t[s]);else e=t;return e},s.upperFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},s.roundTo=function(e,t=0){let r=10**t;return Math.round(e*r)/r},s.toBoolean=function(e){return"string"==typeof e?"1"===e||"TRUE"===e.toUpperCase():!!e},s._instance=null,s.singleInstance=!1,s.getInstance=function(e=!1){if(this._instance)return this._instance;if(!e)throw"Error! this._instance is empty!";return null},s.save=function(){if(this._instance){if(this.singleInstance)return this._instance.save();throw"Error! The class must be with singleInstance=true!"}throw"Error! this._instance is empty!"},s.get=function(...e){return this._instance&&this._instance.get(...e)},s.set=function(...e){return this._instance&&this._instance.set(...e)},s.on=function(...e){return this._instance&&this._instance.on(...e)},s.off=function(...e){return this._instance&&this._instance.off(...e)},s.getProperties=function(...e){return this._instance&&this._instance.properties},s.localStorageKey="",s._bChanged=!1,s._index=0,s._prevValue=void 0,s._xy={x:0,y:0},s.version="1.0.3","object"==typeof exports&&"object"==typeof e?e.exports=s:"function"==typeof define&&r(1)?define("SGModel",[],()=>s):"object"==typeof exports?exports.SGModel=s:"object"==typeof window&&window.document?window.SGModel=s:(void 0).SGModel=s}).call(this,r(0)(e))},function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return i}));var s=r(2);class i extends s.a{set(e,...t){super.set.apply(this,arguments)&&this._binderInitialized&&this._refreshElement(e)}bindHTML(e){if(!this._binderInitialized){if("undefined"==typeof document)throw"Error! document is undefined!";this._onChangeDOMElementValue=this._onChangeDOMElementValue.bind(this),this._elementsHTML={},this._binderInitialized=!0}for(var t in e||(e=document.body),"string"==typeof e&&(e=document.querySelector(e)),this._elementsHTML)this._elementsHTML[t].removeEventListener("change",this._onChangeDOMElementValue),this._elementsHTML[t].removeEventListener("input",this._onChangeDOMElementValue),delete this._elementsHTML[t];this._bindElements([e])}_bindElements(e){for(var t=0;t<e.length;t++){var r=e[t];if(1===r.nodeType){var s=r.getAttribute("sg-property"),i=r.getAttribute("sg-type"),o=r.getAttribute("sg-format"),n=r.getAttribute("sg-css");if(this.has(s)){if(this._elementsHTML[s]=r,r._sg_property=s,r._sg_type=i,n){for(var a in this.properties){var c=new RegExp("^"+a+"$|^"+a+"\\W|\\W"+a+"$|\\W"+a+"\\W","g");n=n.replace(c,"this.properties."+a)}r._sg_css=new Function("return "+n).bind(this),r._sg_css_static_classes=[...r.classList]}switch(r._sg_format=this[o],i){case"dropdown":var l=document.querySelectorAll("[sg-dropdown="+s+"]");for(t=0;t<l.length;t++)l[t].onclick=this._dropdownItemClick;r.addEventListener("change",this._onChangeDOMElementValue);break;default:if(r.type){var _="";switch(r.type){case"range":_="input";break;case"radio":case"checkbox":case"text":case"button":case"select-one":case"select-multiple":_="change"}_&&r.addEventListener(_,this._onChangeDOMElementValue)}}this._refreshElement(s)}this._bindElements(r.children)}}}_refreshElement(e){var t=this._elementsHTML[e];if(t){var r=this.properties[e];switch(t._sg_type){case"dropdown":for(var s=document.querySelectorAll("[sg-dropdown="+e+"]"),i=0;i<s.length;i++){if(s[i].getAttribute("sg-value")==r){t.value=r,t.innerHTML=s[i].innerHTML;break}}break;default:if(t.type)switch(t.type){case"radio":case"checkbox":t.checked=r;break;case"range":case"text":case"button":case"select-one":t.value=r;break;case"select-multiple":if(!Array.isArray(r))break;for(i=0;i<t.options.length;i++){let e=!1;for(var o=0;o<r.length;o++)if(t.options[i].value==r[o]){e=!0;break}t.options[i].selected=e}}else t.innerHTML=t._sg_format?t._sg_format(r):r}if(t._sg_css){let e=t._sg_css();for(i=0;i<t.classList.length;i++)-1===t._sg_css_static_classes.indexOf(t.classList[i])&&t.classList.remove(t.classList[i]);Array.isArray(e)||(e=e.split(" "));for(i=0;i<e.length;i++)t.classList.add(e[i])}}}_onChangeDOMElementValue(e){let t=e.currentTarget;switch(t.type){case"checkbox":this.set(t._sg_property,t.checked);break;case"radio":let e=this._findParentForm(t).querySelectorAll("input[name="+t.name+"]");for(var r=0;r<e.length;r++){var s=e[r];s.getAttribute("sg-property")!==t.getAttribute("sg-property")&&s._sg_property&&this.set(s._sg_property,s.checked)}this.set(t._sg_property,t.checked);break;case"range":case"text":case"button":case"select-one":this.set(t._sg_property,t.value);break;case"select-multiple":let i=[];for(r=0;r<t.selectedOptions.length;r++)i.push(t.selectedOptions[r].value);this.set(t._sg_property,i)}}_dropdownItemClick(){let e=this.parentNode.parentNode.querySelector("button");e.value=this.getAttribute("sg-value"),e.innerHTML=this.innerHTML,e.dispatchEvent(new Event("change"))}_findParentForm(e){let t=e.parentNode;return t?"FORM"===t.tagName?t:this._findParentForm(t):document.body}}"object"==typeof exports&&"object"==typeof e?e.exports=i:"function"==typeof define&&r(1)?define("SGModelView",[],()=>i):"object"==typeof exports?exports.SGModelView=i:"object"==typeof window&&window.document?window.SGModelView=i:(void 0).SGModelView=i}.call(this,r(0)(e))}]).default}));