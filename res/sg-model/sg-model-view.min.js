/*!
 * SGModelView 1.0.3 by @ Kalashnikov Ilya
 * https://model.sg2d.ru
 * License MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SGModelView",[],t):"object"==typeof exports?exports.SGModelView=t():e.SGModelView=t()}(this,(function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return o}));class o{defaults(){return o.clone(this.constructor.defaultProperties)}constructor(e={},t,r){if(this.constructor.singleInstance){if(this.constructor._instance)throw"Error! this.constructor._instance not is empty!";this.constructor._instance=this}let i=this.defaults();if(this.constructor.localStorageKey){let t=void 0,r=localStorage.getItem(this.constructor.localStorageKey+(this.constructor.singleInstance?"":"_"+e.id));r&&(t=JSON.parse(r)),t&&o.initObjectByObject(i,t)}for(var n in"object"!=typeof e&&(e={}),e){var s=e[n];switch(this.constructor.typeProperties[n]){case o.TYPE_ANY:case o.TYPE_ARRAY:break;case o.TYPE_NUMBER:e[n]=void 0===s?void 0:+s;break;case o.TYPE_NUMBER_OR_XY:"object"==typeof s?(s.x=void 0===s.x?void 0:+s.x,s.y=void 0===s.y?void 0:+s.y):e[n]=void 0===s?void 0:+s;break;case o.TYPE_ARRAY_NUMBERS:for(var a=0;a<s.length;a++)s[a]=+s[a];break;case o.TYPE_OBJECT_NUMBERS:if(Array.isArray(s)){if(!(l=i[n]))throw'No default value was set for an object named "'+n+'" ('+this.constructor.name+")! An object structure is required to fill in the data!";var c=0;for(var a in l)l[a]=+s[c],c++;e[n]=l}else{if("object"!=typeof s)throw'Error! Property "'+n+'" ('+this.constructor.name+") must be an object or an array!";for(var a in s)s[a]=+s[a]}break;case o.TYPE_STRING:e[n]=""+s;break;case o.TYPE_BOOLEAN:e[n]=o.toBoolean(s);break;case o.TYPE_OBJECT:if(Array.isArray(s)){var l;if(!(l=i[n]))throw'No default value was set for an object named "'+n+'" ('+this.constructor.name+")! An object structure is required to fill in the data!";c=0;for(var a in l)l[a]=s[c],c++;e[n]=l}else if("object"!=typeof s)throw'Error! Property "'+n+'" ('+this.constructor.name+") must be an object or an array!";break;default:throw'Error! Unknown type specified for property "'+n+'" ('+this.constructor.name+")!"}}if(this.properties=o.defaults({},i,e),this.properties.id||(this.properties.id=o.uid()),t?Object.assign(this,t):t=o.OBJECT_EMPTY,this.destroyed=!1,this.onChangeCallbacks={},!this.constructor.hasOwnProperty("_ownSettersInitialized"))for(var n in this.constructor._ownSettersInitialized=!0,this.constructor.ownSetters)!0===this.constructor.ownSetters[n]&&(this.constructor.ownSetters[n]=this["set"+o.upperFirstLetter(n)]);this.changed=!1,this.initialize.call(this,e,t,r)}initialize(){}set(e,t,r,i=0){if("object"!=typeof r&&void 0!==r)throw'Error 7610932! "options" type is not a object or undefined! Property: '+e+", constructor: "+this.constructor.name;if("number"!=typeof i)throw'Error 7892354! "flags" type is not a number!';if(r=r||o.OBJECT_EMPTY,!(i&o.FLAG_IGNORE_OWN_SETTER)&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r,i);var n=this.constructor.typeProperties[e];if(n)switch(n){case o.TYPE_ANY:break;case o.TYPE_NUMBER:void 0!==t&&(t=r.precision?o.roundTo(t,r.precision):+t);break;case o.TYPE_NUMBER_OR_XY:return this._setNumberOrXY.apply(this,arguments);case o.TYPE_ARRAY:case o.TYPE_ARRAY_NUMBERS:return this._setArray.apply(this,arguments);case o.TYPE_OBJECT:case o.TYPE_OBJECT_NUMBERS:return this._setObject.apply(this,arguments);case o.TYPE_STRING:t=""+t;break;case o.TYPE_BOOLEAN:t=o.toBoolean(t)}var s=this.properties[e];if(s===t){if(!(i&o.FLAG_FORCE_CALLBACKS))return!1}else this.properties[e]=t,this.changed=!0;if(!(i&o.FLAG_NO_CALLBACKS)){o._prevValue=void 0!==r.previous_value?r.previous_value:i&o.FLAG_PREV_VALUE_CLONE?o.clone(s):s;var a=this.onChangeCallbacks[e];if(a){i&o.FLAG_OFF_MAY_BE&&(a=o.clone(a));var c=void 0;for(var l in a){var h=a[l];void 0!==(c=h.d?h.f.call(h.c?h.c:this,h.d,t,o._prevValue,e):h.f.call(h.c?h.c:this,t,o._prevValue,e))&&(s=c)}}this.onAllCallback&&this.onAllCallback()}return!0}_setArray(e,t,r,i=0){if(r=r||o.OBJECT_EMPTY,!(i&o.FLAG_IGNORE_OWN_SETTER)&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r,i);var n=this.constructor.typeProperties[e],s=this.properties[e];if(o._prevValue=r.previous_value||void 0,o._bChanged=!1,Array.isArray(t))for(var a=0;a<t.length;a++){var c=t[a];n===o.TYPE_ARRAY_NUMBERS&&(c=r.precision?o.roundTo(c,r.precision):+c),s[a]!==c&&(o._bChanged=!0,i&o.FLAG_PREV_VALUE_CLONE&&!o._prevValue&&(o._prevValue=o.clone(s)),s[a]=c)}else{if(t)throw"aValues should be must Array or empty! ("+this.constructor.name+")";for(c=n===o.TYPE_OBJECT_NUMBERS?0:void 0,a=0;a<s.length;a++)s[a]!==c&&(o._bChanged=!0,i&o.FLAG_PREV_VALUE_CLONE&&!o._prevValue&&(o._prevValue=o.clone(s)),s[a]=c)}return o._bChanged&&(this.changed=!0),!!(o._bChanged||i&o.FLAG_FORCE_CALLBACKS)&&(this._runCallbacks(e,s,i),!0)}_setObject(e,t,r,i=0){if(r=r||o.OBJECT_EMPTY,!(i&o.FLAG_IGNORE_OWN_SETTER)&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r,i);var n=this.constructor.typeProperties[e],s=this.properties[e];if(o._prevValue=r.previous_value||void 0,o._bChanged=!1,Array.isArray(t))for(var a in o._index=0,s){var c=t[o._index];n===o.TYPE_OBJECT_NUMBERS&&(c=r.precision?o.roundTo(c,r.precision):+c),s[a]!==c&&(o._bChanged=!0,i&o.FLAG_PREV_VALUE_CLONE&&!o._prevValue&&(o._prevValue=o.clone(s)),s[a]=c),o._index++}else if(t)for(var a in t){c=t[a];n===o.TYPE_OBJECT_NUMBERS&&(c=r.precision?o.roundTo(c,r.precision):+c),s[a]!==c&&(o._bChanged=!0,i&o.FLAG_PREV_VALUE_CLONE&&!o._prevValue&&(o._prevValue=o.clone(s)),s[a]=c)}else{c=n===o.TYPE_OBJECT_NUMBERS?0:void 0;for(var a in s)s[a]!==c&&(o._bChanged=!0,i&o.FLAG_PREV_VALUE_CLONE&&!o._prevValue&&(o._prevValue=o.clone(s)),s[a]=c)}return o._bChanged&&(this.changed=!0),!!(o._bChanged||i&o.FLAG_FORCE_CALLBACKS)&&(this._runCallbacks(e,s,i),!0)}_setNumberOrXY(e,t,r,i=0){if(r=r||o.OBJECT_EMPTY,!(i&o.FLAG_IGNORE_OWN_SETTER)&&this.constructor.ownSetters[e])return this.constructor.ownSetters[e].call(this,t,r,i);let n=this.properties[e];return o._prevValue=r.previous_value||void 0,o._bChanged=!1,void 0!==t?"object"==typeof t?(t.x=r.precision?o.roundTo(t.x,r.precision):+t.x,t.y=r.precision?o.roundTo(t.y,r.precision):+t.y,"object"==typeof n?n.x===t.x&&n.y===t.y||(o._bChanged=!0,i&o.FLAG_PREV_VALUE_CLONE&&!o._prevValue&&(o._prevValue=o.clone(n)),n.x=t.x,n.y=t.y):n===t.x&&n===t.y||(o._bChanged=!0,o._prevValue=n,this.properties[e]=t)):(t=r.precision?o.roundTo(t,r.precision):+t,"object"==typeof n?n.x===t&&n.y===t||(o._bChanged=!0,i&o.FLAG_PREV_VALUE_CLONE&&!o._prevValue&&(o._prevValue=o.clone(n)),this.properties[e]=t):n!==t&&(o._bChanged=!0,o._prevValue=n,this.properties[e]=t)):n!==t&&(o._bChanged=!0,i&o.FLAG_PREV_VALUE_CLONE&&!o._prevValue&&(o._prevValue=o.clone(n)),this.properties[e]=void 0),!!o._bChanged&&(this.changed=!0,(o._bChanged||i&o.FLAG_FORCE_CALLBACKS)&&this._runCallbacks(e,t,i),!0)}_runCallbacks(e,t,r=0){if(!(r&o.FLAG_NO_CALLBACKS)){var i=this.onChangeCallbacks[e];if(i){r&o.FLAG_OFF_MAY_BE&&(i=o.clone(i));var n=void 0;for(var s in i){var a=i[s];void 0!==(n=a.d?a.f.call(a.c?a.c:this,a.d,t,o._prevValue,e):a.f.call(a.c?a.c:this,t,o._prevValue,e))&&(t=n)}}}}get(e){return this.properties[e]}on(e,t,r,o,i=0){if(Array.isArray(e))for(var n=0;n<e.length;n++)this._on.call(this,e[n],t,Array.isArray(r)?r[n]:r,Array.isArray(o)?o[n]:o,i);else this._on.apply(this,arguments)}_on(e,t,r,i,n=0){var s=this.onChangeCallbacks[e];s||(s=this.onChangeCallbacks[e]=[]),s.push({f:t,c:r,d:i}),n===o.FLAG_IMMEDIATELY&&(i?t.call(r||this,i,this.properties[e],this.properties[e],e):t.call(r||this,this.properties[e],this.properties[e],e))}has(e){return this.properties.hasOwnProperty(e)}setOnAllCallback(e,t=0){this.onAllCallback=e,t===o.FLAG_IMMEDIATELY&&this.onAllCallback()}off(e,t){if(e)if(Array.isArray(e))for(var r=0;r<e.length;r++)this._off.call(this,e[r],t);else this._on.apply(this,arguments);else for(var o in this.onChangeCallbacks)this.onChangeCallbacks[o].length=0}_off(e,t){var r=this.onChangeCallbacks[e];if(r)if(t)for(var o=0;o<r.length;o++)r[o].f===t&&(r.splice(o,1),o--);else r.length=0}trigger(e,t=0){var r=this.onChangeCallbacks[e];if(r)for(var i in t&o.FLAG_OFF_MAY_BE&&(r=o.clone(r)),r){var n=r[i];n.d?n.f.call(n.c?n.c:this,n.d,this.properties[e],this.properties[e],e):n.f.call(n.c?n.c:this,this.properties[e],this.properties[e],e)}}save(){if(!this.constructor.localStorageKey)throw"Error 37722990!";let e;this.constructor.singleInstance&&(e=this.properties.id,delete this.properties.id);let t={};if(this.constructor.localStorageProperties)for(var r=0;r<this.constructor.localStorageProperties.length;r++){let e=this.constructor.localStorageProperties[r];t[e]=this.properties[e]}else for(var o in this.properties)"_"!==o[0]&&(t[o]=this.properties[o]);localStorage.setItem(this.constructor.localStorageKey+(this.constructor.singleInstance?"":"_"+e),JSON.stringify(t)),this.constructor.singleInstance&&(this.properties.id=e)}destroy(){this.destroyed=!0,this.constructor._instance=null,this.off()}}o.typeProperties={},o.defaultsProperties={},o.TYPE_ANY=void 0,o.TYPE_NUMBER=1,o.TYPE_STRING=2,o.TYPE_BOOLEAN=3,o.TYPE_OBJECT=4,o.TYPE_ARRAY=5,o.TYPE_ARRAY_NUMBERS=6,o.TYPE_OBJECT_NUMBERS=7,o.TYPE_NUMBER_OR_XY=8,o.FLAG_IMMEDIATELY=!0,o.OBJECT_EMPTY=Object.preventExtensions({}),o.FLAG_OFF_MAY_BE=1,o.FLAG_PREV_VALUE_CLONE=2,o.FLAG_NO_CALLBACKS=4,o.FLAG_FORCE_CALLBACKS=8,o.FLAG_IGNORE_OWN_SETTER=16,o.OPTIONS_PRECISION_2=Object.preventExtensions({precision:2}),o.OPTIONS_PRECISION_3=Object.preventExtensions({precision:3}),o.OPTIONS_PRECISION_4=Object.preventExtensions({precision:4}),o.OPTIONS_PRECISION_5=Object.preventExtensions({precision:5}),o.ownSetters={},o._uid=0,o.uid=function(){return++o._uid},o.defaults=function(e,...t){for(var r=t.length;r--;){var i=t[r];for(var n in i)void 0===e[n]&&(e[n]="object"==typeof i[n]?o.clone(i[n]):i[n])}return e},o.clone=function(e){let t;if(Array.isArray(e)){t=[];for(var r=0;r<e.length;r++)t[r]="object"==typeof e[r]?o.clone(e[r]):e[r]}else if("object"==typeof e)for(var i in t={},e)t[i]="object"==typeof e[i]?o.clone(e[i]):e[i];else t=e;return t},o.initObjectByObject=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t.hasOwnProperty(r)&&("object"==typeof e[r]?this.initObjectByObject(e[r],t[r]):e[r]=t[r]);else if("object"==typeof e)for(var o in e)t.hasOwnProperty(o)&&("object"==typeof e[o]?this.initObjectByObject(e[o],t[o]):e[o]=t[o]);else e=t;return e},o.upperFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},o.roundTo=function(e,t=0){let r=10**t;return Math.round(e*r)/r},o.toBoolean=function(e){return"string"==typeof e?"1"===e||"TRUE"===e.toUpperCase():!!e},o._instance=null,o.singleInstance=!1,o.getInstance=function(e=!1){if(this._instance)return this._instance;if(!e)throw"Error! this._instance is empty!";return null},o.save=function(){if(this._instance){if(this.singleInstance)return this._instance.save();throw"Error! The class must be with singleInstance=true!"}throw"Error! this._instance is empty!"},o.get=function(...e){return this._instance&&this._instance.get(...e)},o.set=function(...e){return this._instance&&this._instance.set(...e)},o.on=function(...e){return this._instance&&this._instance.on(...e)},o.off=function(...e){return this._instance&&this._instance.off(...e)},o.getProperties=function(...e){return this._instance&&this._instance.properties},o.localStorageKey="",o._bChanged=!1,o._index=0,o._prevValue=void 0,o._xy={x:0,y:0},o.version="1.0.3","object"==typeof exports&&"object"==typeof e?e.exports=o:"function"==typeof define&&r(1)?define("SGModel",[],()=>o):"object"==typeof exports?exports.SGModel=o:"object"==typeof window&&window.document?window.SGModel=o:(void 0).SGModel=o}).call(this,r(0)(e))},function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return i}));var o=r(2);class i extends o.a{set(e,...t){super.set.apply(this,arguments)&&this._binderInitialized&&this._refreshElement(e)}bindHTML(e){if(!this._binderInitialized){if("undefined"==typeof document)throw"Error! document is undefined!";this._onChangeDOMElementValue=this._onChangeDOMElementValue.bind(this),this._elementsHTML={},this._binderInitialized=!0}for(var t in e||(e=document.body),"string"==typeof e&&(e=document.querySelector(e)),this._elementsHTML)this._elementsHTML[t].removeEventListener("change",this._onChangeDOMElementValue),this._elementsHTML[t].removeEventListener("input",this._onChangeDOMElementValue),delete this._elementsHTML[t];this._bindElements([e])}_bindElements(e){for(var t=0;t<e.length;t++){var r=e[t];if(1===r.nodeType){var o=r.getAttribute("sg-property"),i=r.getAttribute("sg-type"),n=r.getAttribute("sg-format");r.getAttribute("sg-attributes");if(this.has(o)){switch(this._elementsHTML[o]=r,r._sg_property=o,r._sg_type=i,r._sg_format=this[n]||(e=>e),i){case"dropdown":var s=document.querySelectorAll("[sg-dropdown="+o+"]");for(t=0;t<s.length;t++)s[t].onclick=this._dropdownItemClick;r.addEventListener("change",this._onChangeDOMElementValue);break;default:if(r.type){var a="";switch(r.type){case"range":a="input";break;case"radio":case"checkbox":case"text":case"button":case"select-one":case"select-multiple":a="change"}a&&r.addEventListener(a,this._onChangeDOMElementValue)}}this._refreshElement(o)}this._bindElements(r.children)}}}_refreshElement(e){var t=this._elementsHTML[e];if(t){var r=this.properties[e];switch(t._sg_type){case"dropdown":for(var o=document.querySelectorAll("[sg-dropdown="+e+"]"),i=0;i<o.length;i++){if(o[i].getAttribute("sg-value")==r){t.value=r,t.innerHTML=o[i].innerHTML;break}}break;default:if(t.type)switch(t.type){case"radio":case"checkbox":t.checked=r;break;case"range":case"text":case"button":case"select-one":t.value=r;break;case"select-multiple":if(!Array.isArray(r))break;for(i=0;i<t.options.length;i++){let e=!1;for(var n=0;n<r.length;n++)if(t.options[i].value==r[n]){e=!0;break}t.options[i].selected=e}}else t.innerHTML=t._sg_format?t._sg_format(r):r}}}_onChangeDOMElementValue(e){let t=e.currentTarget;switch(t.type){case"checkbox":this.set(t._sg_property,t.checked);break;case"radio":let e=this._findParentForm(t).querySelectorAll("input[name="+t.name+"]");for(var r=0;r<e.length;r++){var o=e[r];o.getAttribute("sg-property")!==t.getAttribute("sg-property")&&o._sg_property&&this.set(o._sg_property,o.checked)}this.set(t._sg_property,t.checked);break;case"range":case"text":case"button":case"select-one":this.set(t._sg_property,t.value);break;case"select-multiple":let i=[];for(r=0;r<t.selectedOptions.length;r++)i.push(t.selectedOptions[r].value);this.set(t._sg_property,i)}}_dropdownItemClick(){let e=this.parentNode.parentNode.querySelector("button");e.value=this.getAttribute("sg-value"),e.innerHTML=this.innerHTML,e.dispatchEvent(new Event("change"))}_findParentForm(e){let t=e.parentNode;return t?"FORM"===t.tagName?t:this._findParentForm(t):document.body}}"object"==typeof exports&&"object"==typeof e?e.exports=i:"function"==typeof define&&r(1)?define("SGModelView",[],()=>i):"object"==typeof exports?exports.SGModelView=i:"object"==typeof window&&window.document?window.SGModelView=i:(void 0).SGModelView=i}.call(this,r(0)(e))}]).default}));